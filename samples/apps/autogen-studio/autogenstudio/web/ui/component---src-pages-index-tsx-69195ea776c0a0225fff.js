"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[245],{28541:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var a=n(96540),l=n(18504),s=n(70870),r=n(74259),o=n(92744),i=n(63532),c=n(85575);function m({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}var d=a.forwardRef(m),u=n(64467),f=n(45795);function v({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}var E=a.forwardRef(v),w=n(52332),h=n(68404),b=n(14403),g=n(26156),p=n(34267),x=n(56426),k=n(87883),y=n(79365),N=n(6383),A=n(8369),S=n(58747),j=n(28007);var C=e=>{let{workflow:t,setWorkflow:n,workflow_id:l,disabled:r}=e;const[c,m]=a.useState({status:!0,message:"All good"}),[d,u]=a.useState(!1),[f,v]=a.useState([]),[E,w]=a.useState(0),{user:h}=a.useContext(o.v),b=`${(0,s.Tt)()}/workflows?user_id=${null==h?void 0:h.email}`;return a.useEffect((()=>{h&&(m(null),u(!0),(0,s.hI)(b,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{if(e&&e.status){if(v(e.data),e.data.length>0)if(r){const t=e.data.findIndex((e=>e.id===l));-1!==t&&(w(t),n(e.data[t]))}else n(e.data[0])}else i.Ay.error(e.message);u(!1)}),(e=>{m(e),i.Ay.error(e.message),u(!1)})))}),[]),a.createElement("div",{className:" mb-4 relative"},a.createElement("div",{className:"text-sm mt-2 mb-2 pb-1  "}," ","Please select an agent workflow to begin."," "),a.createElement("div",{className:"relative mt-2 "},a.createElement(N.p8,{loading:d}),f&&f.length>0&&a.createElement(S.A,{disabled:r,className:"w-full",value:f[E].name,onChange:e=>{w(e),n(f[e])},options:f.map(((e,t)=>({label:e.name,value:t})))}),a.createElement("div",{className:"mt-2 text-xs hidden"}," ",a.createElement("div",{className:"my-2 text-xs"}," ",null==t?void 0:t.name),"View all workflows"," ",a.createElement("span",{className:"text-accent"}," ",a.createElement(j.Link,{to:"/build"},"here"))," ")),!f||f&&0===f.length&&a.createElement("div",{className:"p-1 border rounded text-xs px-2 text-secondary"}," ","No agent workflows found."))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=e=>{let{}=e;const[t,n]=a.useState(!1),[l,r]=a.useState({status:!0,message:"All good"}),{user:c}=a.useContext(o.v),m=(0,s.Tt)(),d=`${m}/sessions?user_id=${null==c?void 0:c.email}`,u=`${m}/sessions`,v=(0,A.J)((e=>e.sessions)),S=(0,A.J)((e=>e.setSessions)),j={user_id:(null==c?void 0:c.email)||"",name:"New Session "+(new Date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},[O,_]=a.useState(j),T=(0,A.J)((e=>e.session)),I=(0,A.J)((e=>e.setSession)),$=(0,A.J)((e=>e.areSessionButtonsDisabled)),[P,W]=a.useState(!1),D=()=>{r(null),n(!0);(0,s.hI)(d,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?S(e.data):i.Ay.error(e.message),n(!1)}),(e=>{r(e),i.Ay.error(e.message),n(!1)}))};a.useEffect((()=>{if(v&&v.length>0){const e=v[0];I(e)}else I(null)}),[v]);a.useEffect((()=>{c&&D()}),[]);const B=v.map(((e,t)=>{const l=(null==T?void 0:T.id)===e.id,o=l?"bg-accent text-white":"bg-secondary text-primary";let d=[{label:a.createElement("div",{onClick:()=>{console.log("deleting session"),(e=>{r(null),n(!0);const t=`${m}/sessions/delete?user_id=${null==c?void 0:c.email}&session_id=${e.id}`,a={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==c?void 0:c.email,session:e})};(0,s.hI)(t,a,(e=>{e&&e.status?(i.Ay.success(e.message),D()):i.Ay.error(e.message),n(!1)}),(e=>{r(e),i.Ay.error(e.message),n(!1)}))})(e)}},a.createElement(f.A,{role:"button",title:"Delete",className:"h-4 w-4 mr-1 inline-block"}),"Delete"),key:"delete"},{label:a.createElement("div",{onClick:()=>{_(e),W(!0)}},a.createElement(E,{role:"button",title:"Edit",className:"h-4 w-4 mr-1 inline-block"}),"Edit"),key:"edit"}];d.push();const u=a.createElement(p.A,{menu:{items:d},trigger:["click"],placement:"bottomRight"},a.createElement("div",{role:"button",className:"float-right ml-2 duration-100 hover:bg-secondary font-semibold px-2 pb-1  rounded "+(l?"hover:text-accent":"")},a.createElement("span",{className:"block -mt-2 "+(l?"text-white":"")}," ","...")));return a.createElement("div",{key:"sessionsrow"+t,className:"group relative  mb-2 pb-1  border-b border-dashed "+($?"opacity-50 pointer-events-none":"")},d.length>0&&a.createElement("div",{className:"  absolute right-2 top-2 group-hover:opacity-100 opacity-0 "},u),a.createElement("div",{className:`rounded p-2 cursor-pointer ${o}`,role:"button",onClick:()=>{$||I(e)}},a.createElement("div",{className:"text-xs mt-1"},a.createElement(w.A,{className:"h-4 w-4 inline-block mr-1"}),e.name),a.createElement("div",{className:"text-xs text-right "},(0,s.fF)(e.created_at||""))))}));let J,R;"undefined"!=typeof window&&(J=window.innerHeight,R=J-400+"px");const G=e=>{let{session:t}=e;const[l,o]=a.useState(null),[c,m]=a.useState(t);a.useEffect((()=>{l&&l.id&&c&&m(L(L({},c),{},{workflow_id:l.id}))}),[l]);const d=null!==c&&void 0!==c.id;return a.createElement(x.A,{onCancel:()=>{W(!1)},title:a.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},a.createElement(w.A,{className:"h-5 w-5 inline-block mr-1"}),"New Session"," "),open:P,footer:[a.createElement(k.Ay,{key:"back",onClick:()=>{W(!1)}},"Cancel"),a.createElement(k.Ay,{key:"submit",type:"primary",disabled:!l,onClick:()=>{W(!1),c&&(e=>{r(null),n(!0);const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,s.hI)(u,t,(e=>{e&&e.status?(i.Ay.success(e.message),D()):i.Ay.error(e.message),n(!1)}),(e=>{r(e),i.Ay.error(e.message),n(!1)}))})(c)}},"Create")]},a.createElement(C,{workflow:l,setWorkflow:o,workflow_id:null==O?void 0:O.workflow_id,disabled:d}),a.createElement("div",{className:"my-2 text-xs"}," Session Name "),a.createElement(y.A,{placeholder:"Session Name",value:(null==c?void 0:c.name)||"",onChange:e=>{c&&m(L(L({},c),{},{name:e.target.value}))}}),a.createElement("div",{className:"text-xs mt-4"}," ",(0,s.fF)((null==c?void 0:c.created_at)||"",!0)))};return a.createElement("div",{className:"  "},a.createElement(G,{session:O||j}),a.createElement("div",{className:"mb-2 relative"},a.createElement("div",{className:""},a.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},a.createElement(h.A,{className:"h-5 w-5 inline-block mr-1"}),"Sessions"," "),v&&v.length>0&&a.createElement("div",{className:"text-xs  hidden mb-2 pb-1  "}," ","Create a new session or select an existing session to view chat."),a.createElement("div",{style:{maxHeight:R},className:"mb-4 overflow-y-auto scroll rounded relative "},B,a.createElement(N.p8,{loading:t})),(!v||0==v.length)&&!t&&a.createElement("div",{className:"text-xs text-gray-500"},"No sessions found. Create a new session to get started.")),a.createElement("div",{className:"flex gap-x-2"},a.createElement("div",{className:"flex-1"}),a.createElement(N.Yi,{className:"text-sm p-2 px-3 "+($?"opacity-50 cursor-not-allowed":""),onClick:()=>{_(j),W(!0)}}," ",a.createElement(b.A,{className:"w-5 h-5 inline-block mr-1"}),"New"))),l&&!l.status&&a.createElement("div",{className:"p-2 border border-orange-500 text-secondary  rounded mt-4   text-sm"}," ",a.createElement(g.A,{className:"h-5 text-orange-500 inline-block mr-2"})," ",l.message))};var T=()=>{const[e,t]=a.useState(!0),n=e?"270px":"50px";let l,s;return"undefined"!=typeof window&&(l=window.innerHeight,s=l-180+"px"),a.createElement("div",{style:{minWidth:n,maxWidth:n,height:"calc(100vh - 190px)"},className:"    "},a.createElement("div",{className:" transition overflow-hidden duration-300  flex flex-col   h-full p-2 overflow-y-scroll scroll rounded "},a.createElement("div",{className:(e?"":"hidden")+"  "},a.createElement(_,null))),a.createElement("div",{onClick:()=>t(!e),role:"button",className:" hover:text-accent duration-150  "},e?a.createElement("div",{className:"mt-4  "}," ",a.createElement(c.A,{className:"w-6 h-6  inline-block    rounded"})," ",a.createElement("span",{className:"text-xs "}," close sidebar")):a.createElement(d,{className:"w-6 h-6   inline-block   font-bold rounded "})))};var I=()=>{const e=(0,A.J)((e=>e.session)),[t,n]=a.useState(!1),[l,c]=a.useState(null),[m,d]=a.useState(null);a.useEffect((()=>{(0,s.ZB)("ara_config",m)}),[m]);const[u,f]=a.useState({status:!0,message:"All good"}),{user:v}=a.useContext(o.v),E=`${(0,s.Tt)()}/sessions/${null==e?void 0:e.id}/messages?user_id=${null==v?void 0:v.email}`;return a.useEffect((()=>{v&&e&&(f(null),n(!0),c(null),(0,s.hI)(E,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?c(e.data):i.Ay.error(e.message),n(!1)}),(e=>{f(e),i.Ay.error(e.message),n(!1)})))}),[e]),a.createElement("div",{className:"h-full   "},a.createElement("div",{className:"flex h-full   "},a.createElement("div",{className:"  mr-2  rounded"},a.createElement(T,null)),a.createElement("div",{className:" flex-1  "},!e&&a.createElement("div",{className:" w-full  h-full flex items-center justify-center"},a.createElement("div",{className:"w-2/3",id:"middle"},a.createElement("div",{className:"w-full   text-center"}," ",a.createElement("img",{src:"/images/svgs/welcome.svg",alt:"welcome",className:"text-accent inline-block object-cover w-56"})),a.createElement(_,null))),null!==e&&a.createElement(r.A,{initMessages:l,session:e}))))};var $=e=>{let{data:t}=e;return a.createElement(l.A,{meta:t.site.siteMetadata,title:"Home",link:"/"},a.createElement("main",{style:{height:"100%"},className:" h-full "},a.createElement(I,null)))}},85575:function(e,t,n){var a=n(96540);function l({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const s=a.forwardRef(l);t.A=s},14403:function(e,t,n){var a=n(96540);function l({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const s=a.forwardRef(l);t.A=s},52332:function(e,t,n){var a=n(96540);function l({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3"}))}const s=a.forwardRef(l);t.A=s},45795:function(e,t,n){var a=n(96540);function l({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const s=a.forwardRef(l);t.A=s}}]);
//# sourceMappingURL=component---src-pages-index-tsx-69195ea776c0a0225fff.js.map